# Stock Selector V3.0 - AI 协作型策略工场 (设计规划)

> **设计背景**: V1/V2 专注于单机策略的完善与参数优化。V3 版本将专注于与 AI (OpenClaw) 的深度协作，以及用户界面的专业化重构。

## 1. 核心目标
*   **离线预测与交易计划**: 系统不再仅仅是“事后分析”，而是能基于 T 日收盘数据，计算 T+1 日的**触发条件** (如：若明日突破 20.5 元则买入)。
*   **AI 协作 (Headless)**: 提供 API 供 OpenClaw 远程控制（触发选股、拉取日报），实现“无人值守”的智能投研。
*   **专业 UI 重构**: 引入 Ant Design，打造极简、高效的后台管理式界面，替代简陋的 V1 原型。

## 2. 新增模块设计

### 2.1 交易计划引擎 (Trade Plan Engine)
*   **职责**: 每日收盘后扫描全市场，生成“明日关注清单”。
*   **数据模型 (Prediction)**:
    *   `target_code`: 标的代码
    *   `trigger_condition`: 触发条件 (Price > X, MA5 > MA10)
    *   `trigger_price`: 触发价格 (具体数值)
    *   `stop_loss`: 建议止损位
    *   `valid_until`: 有效期 (通常为 T+1 日)
*   **API**:
    *   `POST /api/plan/generate`: 强制重新生成计划。
    *   `GET /api/plan/latest`: 获取最新生成的 JSON 数据 (供 AI 读取)。

### 2.2 前端重构 (Ant Design)
*   **风格**: 极简 Dashboard，无复杂的行情 K 线（行情查看交给同花顺）。
*   **核心页面**:
    1.  **看板 (Dashboard)**: 展示明日关注清单、系统运行状态。
    2.  **选股中心 (Screener)**: 
        *   支持 **板块/行业** (申万一级) 级联筛选。
        *   支持 **市场** (主板/科创/创业) 复选。
        *   结果以表格形式展示，支持批量加入回测。
    3.  **回测实验室 (Backtest)**:
        *   支持 **批量回测** (多股对比)。
        *   结果以数据表格为主 (收益率、胜率、盈亏比)。

### 2.3 AI 协作接口 (Headless API)
*   **控制**: `POST /api/screen/run`, `POST /api/backtest/batch`。
*   **感知**: Webhook 回调（可选），当监控到关键信号时主动推送到 OpenClaw。

## 3. 实施路径 (待 V2 完成后启动)
1.  **后端先行**: 改造策略基类支持 `predict()` 方法，实现交易计划生成 API。
2.  **前端跟进**: 搭建 React + Ant Design 新工程，逐步迁移功能。
3.  **AI 对接**: 编写 OpenClaw 脚本，实现自动日报推送。
