# ===========================================
# A股智能选股系统 - 开发环境配置
# 生产环境：APP_ENV_FILE=.env.prod uv run uvicorn app.main:app
# ===========================================

# --- 应用 ---
APP_ENV=development
LOG_LEVEL=DEBUG
PERFORMANCE_LOG_LEVEL=DEBUG

# --- 数据库 (PostgreSQL) ---
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/stock_selector_test
DB_POOL_SIZE=3
DB_MAX_OVERFLOW=5
DB_ECHO=false

# --- Redis ---
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=1
REDIS_PASSWORD=

# --- Tushare 数据源 ---
TUSHARE_TOKEN=e898fb48fb38f9f9399354e90f9e8e41bf7a52e5827b41ae38ac531c
TUSHARE_RETRY_COUNT=2
TUSHARE_RETRY_INTERVAL=1.0
TUSHARE_QPS_LIMIT=400

# --- ETL ---
ETL_BATCH_SIZE=5000
ETL_COMMIT_INTERVAL=10

# --- Daily Sync (批量同步) ---
DAILY_SYNC_BATCH_SIZE=50
DAILY_SYNC_CONCURRENCY=4

# --- Data Integrity Check (数据完整性检查) ---
DATA_INTEGRITY_CHECK_ENABLED=true
DATA_INTEGRITY_CHECK_DAYS=7

# --- Auto Data Update (自动数据更新) ---
AUTO_UPDATE_ENABLED=true
AUTO_UPDATE_PROBE_INTERVAL=15
AUTO_UPDATE_PROBE_TIMEOUT=18:00
AUTO_UPDATE_PROBE_STOCKS=["600519.SH","000001.SZ","600036.SH","000858.SZ","601318.SH"]
AUTO_UPDATE_PROBE_THRESHOLD=0.8
SCHEDULER_AUTO_UPDATE_CRON=15 7 * * 1-5

# --- Sync Progress (累积进度追踪) ---
DATA_START_DATE=2025-01-01
SYNC_STOCK_LIST_ON_STARTUP=true
BATCH_SYNC_MAX_RETRIES=2
DATA_COMPLETENESS_THRESHOLD=0.95
SYNC_BATCH_DAYS=365
SYNC_BATCH_TIMEOUT=3600
SYNC_FAILURE_RETRY_CRON=0 20 * * 1-5
PIPELINE_COMPLETENESS_DEADLINE=18:00

# --- AI (Gemini) ---
GEMINI_API_KEY=AIzaSyB2oCLhkqbqfLoQM-YSCl1MSvcwxIqPcwI
GEMINI_USE_ADC=false
GEMINI_GCP_PROJECT=
GEMINI_GCP_LOCATION=us-central1
GEMINI_MODEL_ID=gemini-2.5-flash
GEMINI_MAX_TOKENS=4000
GEMINI_TIMEOUT=30
GEMINI_MAX_RETRIES=2
AI_DAILY_BUDGET_USD=1.0

# --- Cache (Redis) ---
CACHE_TECH_TTL=3600
CACHE_PIPELINE_RESULT_TTL=7200
CACHE_WARMUP_ON_STARTUP=false
CACHE_REFRESH_BATCH_SIZE=100

# --- CORS ---
CORS_ORIGINS=["http://localhost:5173"]

# --- 代理配置（空值表示不使用代理）---
http_proxy=
https_proxy=

# --- 通知渠道 ---
TELEGRAM_BOT_TOKEN=8255141203:AAHSIoe8ztNlXGz_ym-u1w1Zq9UaYHUJ_Z0
TELEGRAM_CHAT_ID=8467155705
